<!DOCTYPE html>
<html>
<head>
    <!-- Pyodide and CodeMirror -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/pastel-on-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="../assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="192x192" href="../assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../assets/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="../assets/android-chrome-512x512.png">
    
    <!-- Core Stylesheets -->
    <link rel="stylesheet" href="../assets/colours.css">
    <link rel="stylesheet" href="../assets/shared-styles.css">
    <link rel="stylesheet" href="../assets/nav-bar.css">
    <link rel="stylesheet" href="../assets/module_card.css">
    <link rel="stylesheet" href="../assets/learning_outcomes.css">
    <link rel="stylesheet" href="../assets/learning_lists.css">
    <link rel="stylesheet" href="../assets/box_styles.css">
    <link rel="stylesheet" href="../assets/code_styles.css">

    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L2D - PF2 - Sets</title>
    
    <!-- File URLs for this lesson -->
    <script>window.LESSON_FILES = []; window.LESSON_PACKAGES = [];</script>
        
</head>
<body>
    
    <!-- Sidebar Navigation -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
        </div>
        
        <h3>Content</h3>
        <ul>
            <li><a href="./introduction.html" class="">Introduction</a></li><li><a href="./lists.html">Lists</a></li><li><a href="./tuples.html">Tuples</a></li>
            <li>
                <div class="nav-toggle active" data-target="expandable-section-3">
                    Sets
                    <span class="toggle-icon">▼</span>
                </div>
                <ul class="nested-nav expanded" id="expandable-section-3"><li><a href="#introduction">Introduction</a></li><li><a href="#creating-sets">Creating sets</a></li><li><a href="#mutability">Mutability</a></li><li><a href="#other-common-set-methods">Other common set methods</a></li><li><a href="#indexing">Indexing</a></li><li><a href="#set-operations">Set operations</a></li><li><a href="#summary">Summary</a></li>
                </ul>
            </li><li><a href="./strings.html">Strings</a></li><li><a href="./comparison.html">Comparison</a></li><li><a href="./assignment.html">Assignment</a></li><li><a href="./feedback.html">Feedback</a></li>
        </ul>

        <h3 class="collapsible-header collapsed">
            Resources
            <span class="collapse-icon">►</span>
        </h3>
        <div class="collapsible-content collapsed">
            <ul>
                <li><a href="./glossary.html">Glossary</a></li><li><a href="./downloads.html">Downloads</a></li><li><a href="../HB/introduction.html">Handbook</a></li>
            </ul>
        </div>

        <h3 class="collapsible-header collapsed">
            Previous Modules
            <span class="collapse-icon">►</span>
        </h3>
        <div class="collapsible-content collapsed">
            <ul>
            <li><a href="../PF0/introduction.html">PF0</a></li>
            <li><a href="../PF1/introduction.html">PF1</a></li>
        </ul>
        </div>

        <h3>
            <li><a href="./report-issue.html">Report an Issue</a></li>
        </h3>
    </div>
    
    <!-- Sidebar Toggle Button -->
    <button id="sidebar-toggle" class="sidebar-toggle">❮</button>
    
    <!-- Main Content Area -->
    <div id="main-content" class="main-content">
        <!-- Top Navigation Bar -->
        <div class="top-navbar">
            <h1 class="page-title">Python Fundamentals 2</h1>
            <div class="nav-actions">
            </div>
        </div>

        
            <div class="module-card" id="introduction">
                <div class="module-header">
                    Sets <span class="module-tag">PF2</span>
                </div>
                <div class="module-body">
                    <h3>Learning Objectives</h3>
                    <div class="learning-outcomes">
                        <div class="outcome-item">
                    <span class="outcome-number">1</span>
                    <span class="outcome-text">Create and manipulate sets in Python</span>
                </div>
<div class="outcome-item">
                    <span class="outcome-number">2</span>
                    <span class="outcome-text">Understand the unique properties of sets</span>
                </div>
<div class="outcome-item">
                    <span class="outcome-number">3</span>
                    <span class="outcome-text">Perform mathematical set operations</span>
                </div>
<div class="outcome-item">
                    <span class="outcome-number">4</span>
                    <span class="outcome-text">Identify when to use sets versus other data structures like lists and tuples</span>
                </div>
                    </div>
                    <h3>Introduction</h3>
                    <p>Another built-in Python collection type is the <strong>set</strong>. Unlike lists and tuples, sets are <strong>unordered</strong> collections of <strong>unique</strong> items.<br><br>Let&#x27;s break down those two characteristics:<br><ul class="nested-list"><li><strong>Unordered</strong>: Items in a set <em>do not have a defined order or index</em>; you cannot access items by position</li><br><li><strong>Unique</strong>: A set <em>cannot contain duplicate</em> values; each item must be unique</li></ul>These properties make sets particularly useful for <strong>efficiently checking for membership</strong> using the <code>in</code> operator, <strong>removing duplicates</strong> from other collections, and <strong>performing mathematical set operations</strong> that find the <strong>common</strong> or <strong>different items</strong> between sets.</p><p>See here for the documentation of <a href="https://docs.python.org/3/tutorial/datastructures.html#sets"><code>sets</code></a> from Python.org.</p>
                </div>
            </div>
            
            <div class="module-card" id="creating-sets">
                <div class="module-body">
                    <div class="module-section">
                        <h3>Creating sets</h3>
                        <p>Sets can be created using <strong>curly braces</strong> <code>{}</code> or calling the <code>set()</code> class on a list or tuple. When creating a set with curly braces, duplicate values are automatically removed.</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-83"># Creating a set of unique sample identifiers
unique_samples = {&#x27;sample1&#x27;, &#x27;sample2&#x27;, &#x27;sample3&#x27;, &#x27;sample1&#x27;, &#x27;sampleC&#x27;}
print(unique_samples)</textarea>
            </div>
            <div id="code-cell-83-output" class="output"></div>
        </div>
        <p>Notice that <code>sample1</code> appears twice in our creation, but the set <strong>automatically removes the duplicate</strong>. This function helps make <code>set()</code> more than a data structure, but all a powerful <em>data cleaning tool</em>.<br><br>In the cell below, let&#x27;s explore adding two equal values (the number &#x27;1&#x27;), but inserting them into our set as two different types (integer and string, respectively).</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-84"># Creating a set from a list to remove duplicates
samples = [1, 1, &#x27;1&#x27;, 2, 5]
unique_samples = set(samples)
print(unique_samples)</textarea>
            </div>
            <div id="code-cell-84-output" class="output"></div>
        </div>
        
        <div class="info-box note-box">
            <div class="box-title">
                <span class="box-icon"></span>
                NOTE
            </div>
            <div class="box-content">
                <p>This example illustrates that Python distinguishes between <code>1</code> (an integer) and <code>&#x27;1&#x27;</code> (a string), so <strong>both are preserved</strong> as unique values in the set.</p>
            </div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="module-card" id="creating-sets">
                <div class="module-body">
                    <div class="module-section">
                        
        <div class="info-box practice-exercise-box">
            <div class="box-title">
                <span class="box-icon"></span>
                PRACTICE EXERCISE
            </div>
            <div class="box-content">
                <p><strong>1.</strong></p>
                <p>You have a list of gene names from a sequencing experiment that contains duplicates: <code>gene_list</code>. Create a set called <code>unique_genes</code> to remove the duplicates.</p>
            </div>
        </div>
        
        <div class="code-area">
            <div class="code-container code-editor">
                <textarea id="code-cell-85">gene_list = [&#x27;BRCA1&#x27;, &#x27;TP53&#x27;, &#x27;BRCA1&#x27;, &#x27;MYC&#x27;, &#x27;TP53&#x27;, &#x27;KRAS&#x27;, &#x27;MYC&#x27;]
# Create your unique_genes set here</textarea>
            </div>
            <button id="run-code-cell-85" class="run-button">Run Code</button>
            <div id="code-cell-85-output" class="output"></div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="module-card" id="creating-an-empty-set">
                <div class="module-body">
                    <div class="module-section">
                        <h3>Creating an empty set</h3>
                        <p>Using <code>{}</code> alone creates an empty dictionary (a different data structure we will learn about in Python Fundamentals 3), <em>not</em> a set.<br><br>The cell below demonstrates why you shouldn&#x27;t use <em>empty</em> curly braces <code>{}</code> to instantiate a set:</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-86">object = {}

print(type(object))</textarea>
            </div>
            <div id="code-cell-86-output" class="output"></div>
        </div>
        <p>Using the <code>type()</code> class, we can confirm that empty curly braces create a dictionary.<br><br>However, as we have seen earlier in this lesson, when appropriately used, curly brackets <code>{}</code> will create a set.<br><br>However, as <code>set()</code> is usually deployed to clean a list or tuple (of duplicates), you will most often find yourself using the <code>set()</code> class, as follows:</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-87"># Creating an empty set
empty_set = set()

print(empty_set)
print(type(empty_set))</textarea>
            </div>
            <div id="code-cell-87-output" class="output"></div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="module-card" id="mutability">
                <div class="module-body">
                    <div class="module-section">
                        <h3>Mutability</h3>
                        <p>Like lists, sets are <strong>mutable</strong>, meaning that you can add or remove items, after they are instantiated (created).<br><br>As with lists, set objects have their own built-in, associated methods. One of these is <code>.add</code>, allowing us to add new items to an existing set.</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-88"># Instantiate a set:
gene_set = {&#x27;geneA&#x27;, &#x27;geneB&#x27;, &#x27;geneC&#x27;}
print(&quot;Original set:&quot;, gene_set)

# Add new items to this set:

gene_set.add(&#x27;geneD&#x27;) # Use the .add() method
print(&quot;After adding geneD:&quot;, gene_set)</textarea>
            </div>
            <div id="code-cell-88-output" class="output"></div>
        </div>
        <p>If you attempt to add a duplicate, the operation is simply <em>ignored</em> without raising an error:</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-89">gene_set.add(&#x27;geneA&#x27;)  # This already exists
print(&quot;After attempting to add geneA again:&quot;, gene_set)</textarea>
            </div>
            <div id="code-cell-89-output" class="output"></div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="module-card" id="other-common-set-methods">
                <div class="module-body">
                    <div class="module-section">
                        <h3>Other common set methods</h3>
                        <p>Unique items in a set can be removed using <code>.remove()</code> or <code>.discard()</code>:</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-90">gene_set.remove(&#x27;geneB&#x27;)                    # Use .remove() to remove a specified item.
print(&quot;After removing geneB:&quot;, gene_set)

# .discard() won&#x27;t raise an error if the item doesn&#x27;t exist:
gene_set.discard(&#x27;geneZ&#x27;)                   # This doesn&#x27;t exist, but no error

print(&quot;After attempting to discard geneZ:&quot;, gene_set)</textarea>
            </div>
            <div id="code-cell-90-output" class="output"></div>
        </div>
        
        <div class="code-area">
            <div class="code-container code-editor">
                <textarea id="code-cell-91"># Practice adding and removing items from sets</textarea>
            </div>
            <button id="run-code-cell-91" class="run-button">Run Code</button>
            <div id="code-cell-91-output" class="output"></div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="module-card" id="other-common-set-methods">
                <div class="module-body">
                    <div class="module-section">
                        
        <div class="info-box practice-exercise-box">
            <div class="box-title">
                <span class="box-icon"></span>
                PRACTICE EXERCISE
            </div>
            <div class="box-content">
                <p><strong>2.</strong></p>
                <p>Create an empty set called <code>patient_ids</code>. Add the following patient IDs to it, one by one:<ul class="nested-list"><li>&#x27;P001&#x27;, &#x27;P002&#x27;, &#x27;P003&#x27;.</li><br><li>Next, check if &#x27;P002&#x27; is in the set and print the result.</li></ul></p>
            </div>
        </div>
        
        <div class="code-area">
            <div class="code-container code-editor">
                <textarea id="code-cell-92"># Create and populate your patient_ids set here</textarea>
            </div>
            <button id="run-code-cell-92" class="run-button">Run Code</button>
            <div id="code-cell-92-output" class="output"></div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="module-card" id="indexing">
                <div class="module-body">
                    <div class="module-section">
                        <h3>Indexing</h3>
                        <p>Because sets are unordered, they <strong>do not support indexing or slicing</strong> like lists do. Attempting to access items by position will raise a <code>TypeError</code>:</p>
        <div class="code-area">
            <div class="code-container code-editor">
                <textarea id="code-cell-93"># Run this cell to see the error: TypeError
gene = gene_set[0]</textarea>
            </div>
            <button id="run-code-cell-93" class="run-button">Run Code</button>
            <div id="code-cell-93-output" class="output"></div>
        </div>
        <p>However, you can still check for an item&#x27;s membership using the <code>in</code> operator:</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-94">print(&#x27;geneA&#x27; in gene_set)
print(&#x27;geneZ&#x27; in gene_set)</textarea>
            </div>
            <div id="code-cell-94-output" class="output"></div>
        </div>
        
        <div class="info-box fact-box">
            <div class="box-title">
                <span class="box-icon"></span>
                FACT
            </div>
            <div class="box-content">
                <p>Membership testing is far more efficient with sets than with lists. This is obvious when comparing lists with duplicates to its set. However it is also quicker when they are of the same size and unique items. Rather than iterate through all the items to check for equivalence, like in a list, a set membership test will look up the hash (a unique fingerprint) of any given object, and use this to find the position said item should have in a set.</p>
            </div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="module-card" id="set-operations">
                <div class="module-body">
                    <div class="module-section">
                        <h3>Set operations</h3>
                        <p>Sets provide fast and expressive ways to <em>compare</em> collections. This is particularly powerful in biological data analysis, where we often need to compare different datasets to one another in order to find overlaps, or identify unique items.<br><br>In the code cell below, we will use set operations to compare differentially-expressed genes from two experiments:</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-95"># Example: Comparing differentially expressed genes from two experiments
experiment1_genes = {&#x27;TP53&#x27;, &#x27;MYC&#x27;, &#x27;BRCA1&#x27;, &#x27;AKT1&#x27;, &#x27;KRAS&#x27;}
experiment2_genes = {&#x27;MYC&#x27;, &#x27;VEGFA&#x27;, &#x27;KRAS&#x27;, &#x27;MAPK1&#x27;, &#x27;TP53&#x27;}

print(&quot;Experiment 1 genes:&quot;, experiment1_genes)
print(&quot;Experiment 2 genes:&quot;, experiment2_genes)</textarea>
            </div>
            <div id="code-cell-95-output" class="output"></div>
        </div>
        
        <div class="video-container">
            <iframe 
                src="https://www.youtube.com/embed/vFfO2fx8VE0"
                width="560"
                height="315"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
        </div>
        <p>We can also make use of the <code>.union()</code> method to identify all items <em>unique</em> to multiple sets. The method returns a brand new set, containing only unique items. This can be used on two or more sets.<br><br>In this example, let&#x27;s identify genes unique to each of the two experiments:</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-96">all_found_genes = experiment1_genes.union(experiment2_genes)

print(f&quot;Unique genes:  {all_found_genes}&quot;)
print(f&quot;\nTotal unique genes: {len(all_found_genes)}&quot;)
print(f&quot;\nType of object returned by .union():    {type(all_found_genes)}&quot;)</textarea>
            </div>
            <div id="code-cell-96-output" class="output"></div>
        </div>
        <p>The <code>.intersection()</code> method finds items common to two or more sets.<br><br>In the code cell below, we are going to create a third set, with one gene that is common to the two sets created, previously.</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-97">experiment3_genes = {&#x27;EGFR&#x27;, &#x27;AKT1&#x27;, &#x27;PTEN&#x27;, &#x27;VEGFA&#x27;, &#x27;BRCA2&#x27;, &#x27;MAPK3&#x27;, &#x27;KRAS&#x27;} # Let&#x27;s make a third set.

common_genes = experiment1_genes.intersection(experiment2_genes, experiment3_genes)

print(&quot;Common genes:&quot;, common_genes)
print(&quot;\nNumber of overlapping genes:&quot;, len(common_genes))
print(f&quot;\nType of object returned by .intersection():   {type(common_genes)}&quot;)</textarea>
            </div>
            <div id="code-cell-97-output" class="output"></div>
        </div>
        
        <div class="info-box note-box">
            <div class="box-title">
                <span class="box-icon"></span>
                NOTE
            </div>
            <div class="box-content">
                <p>For comparing multiple sets using these methods, the syntax is to separate them using <strong>commas</strong>, inside the round parentheses of the method being applied.</p>
            </div>
        </div>
        <p>In order to find genes unique to one set only, we can use the set method <code>.difference()</code>. The set to which the method is appended, is the set in whose items we are searching for unique items. As with all the methods discussed, a new set is returned containing the unique items.</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-98">unique_to_exp1 = experiment1_genes.difference(experiment2_genes, experiment3_genes)

print(&quot;Unique to Experiment 1:&quot;, unique_to_exp1)</textarea>
            </div>
            <div id="code-cell-98-output" class="output"></div>
        </div>
        <h4>Using .symmetric_difference() and ^</h4><p>In order to return a new set containing either of the items in <strong>two</strong> sets, but not in both, we can use <code>.symmetric_difference()</code>. Explicitly, this returns <strong>everything <em>except</em> what is shared</strong> between two sets.</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-99">exclusive_genes = experiment1_genes.symmetric_difference(experiment2_genes)
print(&quot;Genes found exclusively in one experiment:&quot;, exclusive_genes)</textarea>
            </div>
            <div id="code-cell-99-output" class="output"></div>
        </div>
        
        <div class="info-box note-box">
            <div class="box-title">
                <span class="box-icon"></span>
                NOTE
            </div>
            <div class="box-content">
                <p>The <code>.symmetric_difference()</code> method operates on <em>only</em> two comparison sets. If you try to use three or more sets, a <code>TypeError</code> will be raised.</p>
            </div>
        </div>
        <p>To get around this, you can also use the caret <code>^</code> operator to evaluate the same relationship between sets. Namely, <strong>everything <em>except</em> what is shared</strong> between sets.<br><br>However, <code>^</code> offers one main advantage. And that is that you can compare more than two sets. This is demonstrated in the code cell below.</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-100">exclusive_genes = experiment1_genes ^ experiment2_genes ^ experiment3_genes
print(&quot;Genes found exclusively in one experiment:&quot;, exclusive_genes)</textarea>
            </div>
            <div id="code-cell-100-output" class="output"></div>
        </div>
        
        <div class="info-box note-box">
            <div class="box-title">
                <span class="box-icon"></span>
                NOTE
            </div>
            <div class="box-content">
                <p>If you notice, the output of the cell above returns the &#x27;KRAS&#x27; gene. And yet, somehow, &#x27;KRAS&#x27; is present in all 3, despite the chaining that we performed using the <code>^</code> operator. The reason for this is that the interpreter first compares <code>experiment1_genes</code> with <code>experiment2_genes</code>. This an output that does not contain &#x27;KRAS&#x27;, as this gene is present in both sets. The interpreter then takes the output of this first comparison (which does <em>not</em> contain &#x27;KRAS&#x27;), and compares this to the <code>experiment3_genes</code> set, which <em>does</em> contain &#x27;KRAS&#x27;. Thus, the symmetric difference between the <em>output of the first comparison</em> and the <em>contents of <code>experiment3_genes</code></em> results in outputting &#x27;KRAS&#x27;, as &#x27;KRAS&#x27; is unique to <code>experiment3_genes</code>, post- the comparison between the first two sets. This is an important thing to note. The operation is performing in a pairwise nature, and not <em>truly</em> across more than two sets at a time.</p>
            </div>
        </div>
        <h4>Using set operations and other mathematical operators</h4><p>As with <code>^</code>, you can also use other mathematical operators for different set operations.</p>
        <div class="code-area">
            <div class="code-container code-fixed">
                <textarea id="code-cell-101"># Alternative syntax using operators
print(&quot;Union using |:&quot;, experiment1_genes | experiment2_genes)
print(&quot;Intersection using &amp;:&quot;, experiment1_genes &amp; experiment2_genes)
print(&quot;Difference using -:&quot;, experiment1_genes - experiment2_genes)
print(&quot;Symmetric difference using ^:&quot;, experiment1_genes ^ experiment2_genes)</textarea>
            </div>
            <div id="code-cell-101-output" class="output"></div>
        </div>
        <h4>Set Operations in Python</h4><p>For clarity, this table summarises the different methods, operators and operations associated with them.</p><table class="markdown-table">
<thead>
<tr>
<th><strong>Operation</strong></th>
<th><strong>Method syntax</strong></th>
<th><strong>Operator syntax</strong></th>
<th><strong>Additional info / unique behaviour</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Union</strong></td>
<td><code>set1.union(set2)</code></td>
<td><code>set1 | set2</code></td>
<td>Combines all unique items from both sets. Both forms allow comparison across multiple sets (e.g. <code>set1.union(set2, set3)</code> or <code>set1 | set2 | set3</code>).</td>
</tr>
<tr>
<td><strong>Intersection</strong></td>
<td><code>set1.intersection(set2)</code></td>
<td><code>set1 & set2</code></td>
<td>Returns only items present in <em>both</em> sets. Both forms support multiple sets (e.g. <code>set1 & set2 & set3</code>).</td>
</tr>
<tr>
<td><strong>Difference</strong></td>
<td><code>set1.difference(set2)</code></td>
<td><code>set1 - set2</code></td>
<td>Returns items found in the first set but <strong>not</strong> in the second. Both forms support chaining across multiple sets.</td>
</tr>
<tr>
<td><strong>Symmetric difference</strong></td>
<td><code>set1.symmetric_difference(set2)</code></td>
<td><code>set1 ^ set2</code></td>
<td>Returns items that are <strong>in either set but not both</strong>. The <code>.symmetric_difference()</code> method only works with two sets. However, the operator <code>^</code> can be used to <strong>chain</strong> and compare more than two sets (e.g. <code>set1 ^ set2 ^ set3</code>). But please see the Note box above to clarify how this is not truly comparing more than two sets at a time for symmetric difference.</td>
</tr>
</tbody>
</table>
        <div class="code-area">
            <div class="code-container code-editor">
                <textarea id="code-cell-102"># Practice with set operations using your own biological examples</textarea>
            </div>
            <button id="run-code-cell-102" class="run-button">Run Code</button>
            <div id="code-cell-102-output" class="output"></div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="module-card" id="set-operations">
                <div class="module-body">
                    <div class="module-section">
                        
        <div class="info-box practice-exercise-box">
            <div class="box-title">
                <span class="box-icon"></span>
                PRACTICE EXERCISE
            </div>
            <div class="box-content">
                <p><strong>3.</strong></p>
                <p>You&#x27;re analysing antimicrobial resistance patterns in bacterial isolates. You have resistance genes found in two different patient populations:<br><code>population_A_resistance = {&#x27;blaTEM&#x27;, &#x27;aac&#x27;, &#x27;tetA&#x27;, &#x27;sul1&#x27;, &#x27;qnrS&#x27;}</code><br><code>population_B_resistance = {&#x27;blaCTX&#x27;, &#x27;aac&#x27;, &#x27;tetA&#x27;, &#x27;sul2&#x27;, &#x27;qnrS&#x27;, &#x27;mecA&#x27;}</code><ol class="nested-list"><li>Find all resistance genes present across both populations</li><br><li>Find resistance genes common to both populations</li><br><li>Find resistance genes unique to population A</li><br><li>Find resistance genes that appear in only one population (not both)</li></ol></p>
            </div>
        </div>
        
        <div class="code-area">
            <div class="code-container code-editor">
                <textarea id="code-cell-103">population_A_resistance = {&#x27;blaTEM&#x27;, &#x27;aac&#x27;, &#x27;tetA&#x27;, &#x27;sul1&#x27;, &#x27;qnrS&#x27;}
population_B_resistance = {&#x27;blaCTX&#x27;, &#x27;aac&#x27;, &#x27;tetA&#x27;, &#x27;sul2&#x27;, &#x27;qnrS&#x27;, &#x27;mecA&#x27;}

# Complete the analysis here</textarea>
            </div>
            <button id="run-code-cell-103" class="run-button">Run Code</button>
            <div id="code-cell-103-output" class="output"></div>
        </div>
        
                    </div>
                </div>
            </div>
            
            <div class="module-card" id="summary">
                <div class="module-body">
                    <div class="module-section">
                        <h3>Summary</h3>
                        <p>In this section of Python Fundamentals 2, we explored Python <strong>sets</strong> — collections of unique, unordered items that are ideal for comparing, combining and filtering data. We learned how to create sets, add and remove items, and perform key operations such as <strong>union</strong>, <strong>intersection</strong>, <strong>difference</strong>, and <strong>symmetric difference</strong>. We also examined both the <strong>method syntax</strong> (e.g. <code>.union()</code>, <code>.intersection()</code>) and the <strong>operator syntax</strong> (e.g. <code>|</code>, <code>&amp;</code>, <code>-</code>, <code>^</code>), noting subtle differences in how they behave. Together, these tools make sets a powerful structure for handling distinct data and performing fast membership or comparison tasks in Python.</p>
                    </div>
                </div>
            </div>
            
        
        <div class="page-navigation">
            <a href="./tuples.html" class="nav-button prev">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                </svg>
                Previous
            </a>
            <a href="./strings.html" class="nav-button next">
                Next
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                </svg>
            </a></div>
        
        <!-- Footer -->
        <div class="footer">
            <div>© All materials are copyright scryptIQ 2025</div>
            <div>Powered by Pyodide</div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="../assets/main.js"></script>
    
    <!-- Pyodide Initialisation Script -->
    <script>

// Generalisable Pyodide Initialisation Script
// Variables and state build up naturally as code blocks execute in order

async function main() {
    // Show loading message for all output elements
    document.querySelectorAll(".output").forEach(el => {
        el.textContent = "Loading Pyodide...";
        el.classList.add("loading-message");
    });
    
    try {
        // Load Pyodide
        console.log("Loading Pyodide...");
        const pyodideStartTime = performance.now();
        let pyodide = await loadPyodide();
        const pyodideLoadTime = performance.now() - pyodideStartTime;
        console.log(`Pyodide loaded in ${pyodideLoadTime.toFixed(2)}ms`);
        
        // Load required packages only if specified
        const lessonPackages = window.LESSON_PACKAGES || [];
        
        if (lessonPackages.length > 0) {
            console.log("Loading required Python packages...");
            const packagesStartTime = performance.now();
            
            // Separate built-in packages from PyPI packages
            const builtInPackages = lessonPackages.filter(pkg => 
                ['numpy', 'scipy', 'matplotlib', 'pandas', 'scikit-learn', 'pillow', 'regex'].includes(pkg)
            );
            
            const micropipPackages = lessonPackages.filter(pkg => !builtInPackages.includes(pkg));
            
            // Load built-in packages (fast)
            if (builtInPackages.length > 0) {
                await pyodide.loadPackage(builtInPackages);
                console.log(`Loaded built-in packages: ${builtInPackages.join(', ')}`);
            }
            
            // Install PyPI packages (slower)
            if (micropipPackages.length > 0) {
                await pyodide.loadPackage(['micropip']);
                const micropip = pyodide.pyimport('micropip');
                await micropip.install(micropipPackages);
                console.log(`Installed PyPI packages: ${micropipPackages.join(', ')}`);
            }
            
            const packagesLoadTime = performance.now() - packagesStartTime;
            console.log(`Packages loaded in ${packagesLoadTime.toFixed(2)}ms`);
            console.log(`Total initialisation time: ${(pyodideLoadTime + packagesLoadTime).toFixed(2)}ms`);
        } else {
            console.log("No packages to load for this lesson");
            console.log(`Total initialisation time: ${pyodideLoadTime.toFixed(2)}ms`);
        }

        // Only set up basic Python environment - no pre-loaded variables
        await pyodide.runPythonAsync(`
            import sys
            from io import StringIO
        `);

        // Only set up matplotlib if it's in the loaded packages
        if (lessonPackages.includes('matplotlib')) {
            await pyodide.runPythonAsync(`
                # Set up matplotlib for web rendering
                import matplotlib
                matplotlib.use('AGG')
                import matplotlib.pyplot as plt
                import io
                import base64
                
                def capture_matplotlib():
                    """Capture current matplotlib figure as HTML img tag"""
                    buf = io.BytesIO()
                    plt.savefig(buf, format='png', bbox_inches='tight', dpi=100)
                    buf.seek(0)
                    img_base64 = base64.b64encode(buf.read()).decode('utf-8')
                    plt.close()
                    return f'<img src="data:image/png;base64,{img_base64}" style="max-width: 100%; height: auto;" />'
            `);
            console.log('Matplotlib capture function set up');
        }
        
        console.log("Pyodide loaded successfully");
        
        // Load remote files if URLs are specified
        const lessonFiles = window.LESSON_FILES || [];
        
        if (lessonFiles.length > 0) {
            try {
                console.log(`Checking for ${lessonFiles.length} remote file(s) to load...`);
                
                // Build Python code to load all files dynamically
                let pythonCode = `
from pyodide.http import pyfetch
import os

# Create data directory if it doesn't exist
os.makedirs('./data', exist_ok=True)
`;
                
                // Add loading code for each file
                for (const file of lessonFiles) {
                    pythonCode += `
# Load ${file.filename}
try:
    response = await pyfetch("${file.url}")
    content = await response.string()
    with open('./data/${file.filename}', 'w') as f:
        f.write(content)
    print("Loaded: ${file.filename}")
except Exception as e:
    print(f"Could not load ${file.filename}: {e}")
`;
                }
                
                await pyodide.runPythonAsync(pythonCode);
                console.log("Remote files loaded successfully");
            } catch (error) {
                console.warn("Error loading remote files (continuing anyway):", error);
            }
        } else {
            console.log("No remote files to load for this lesson");
        }
        
        // Function to execute Python code and capture output
        async function executePythonCode(code) {
            try {
                // Redirect Python stdout to capture print statements
                await pyodide.runPythonAsync(`
                    old_stdout = sys.stdout
                    sys.stdout = mystdout = StringIO()
                `);
                
                // Run the user code
                const result = await pyodide.runPythonAsync(code);
                
                // Get the captured stdout
                let stdout = await pyodide.runPythonAsync(`
                    sys.stdout = old_stdout
                    mystdout.getvalue()
                `);
                
                // Check for matplotlib figures only if matplotlib was loaded
                const lessonPackages = window.LESSON_PACKAGES || [];
                if (lessonPackages.includes('matplotlib')) {
                    const hasFigures = await pyodide.runPythonAsync(`
                        import matplotlib.pyplot as plt
                        len(plt.get_fignums()) > 0
                    `);
                    
                    if (hasFigures) {
                        const figureHtml = await pyodide.runPythonAsync(`capture_matplotlib()`);
                        if (stdout) stdout += "\n";
                        stdout += figureHtml;
                    }
                }
                
                // Combine stdout and result
                let output = stdout;
                if (result !== undefined && result !== null && String(result).trim() !== '') {
                    if (output) output += "\n";
                    output += String(result);
                }
                
                return { success: true, output: output || "Code executed successfully (no output)" };
                
            } catch (error) {
                return { success: false, output: "Error: " + error.message };
            }
        }
        
        // Execute all hidden code blocks first (for setup code like imports)
        const hiddenCodeBlocks = Array.from(document.querySelectorAll('.hidden-code textarea'));
        console.log(`Found ${hiddenCodeBlocks.length} hidden code blocks`);

        for (const textarea of hiddenCodeBlocks) {
            const code = textarea.value.trim();
            if (!code) continue;
            
            console.log(`Executing hidden code block: ${textarea.id}`);
            const result = await executePythonCode(code);
            
            if (!result.success) {
                console.error(`Error in hidden code block ${textarea.id}:`, result.output);
            } else {
                console.log(`Hidden code block ${textarea.id} executed successfully`);
            }
        }

        console.log("All hidden code blocks executed");
        
        // Get all fixed code blocks in document order
        const fixedCodeBlocks = Array.from(document.querySelectorAll('.code-fixed textarea'));
        
        // Setup and execute fixed code blocks sequentially
        for (const textarea of fixedCodeBlocks) {
            const code = textarea.value.trim();
            if (!code) continue;
            
            // Set up CodeMirror editor (read-only)
            const editor = CodeMirror.fromTextArea(textarea, {
                mode: "python",
                theme: "pastel-on-dark",
                lineNumbers: true,
                readOnly: true,
                viewportMargin: Infinity
            });
            
            // Find corresponding output element
            const outputId = textarea.id + '-output';
            const outputElement = document.getElementById(outputId);
            
            if (outputElement) {
                outputElement.textContent = "Running code...";
                outputElement.classList.add("loading-message");
                
                // Execute the code (this maintains state for subsequent blocks)
                const result = await executePythonCode(code);
                
                // Display the output - check if it's HTML
                const trimmedOutput = result.output.trim();
                console.log('Output length:', trimmedOutput.length);
                console.log('Output starts with:', trimmedOutput.substring(0, 100));
                
                if (trimmedOutput.includes('<script') && trimmedOutput.includes('Plotly')) {
                    // It's Plotly HTML output - extract just the body content
                    console.log('Rendering as Plotly HTML');
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(result.output, 'text/html');
                    // Clear the output element and append the body content
                    outputElement.innerHTML = '';
                    
                    // Find and load external scripts first (like Plotly CDN)
                    const externalScripts = Array.from(doc.querySelectorAll('script[src]'));
                    const inlineScripts = Array.from(doc.querySelectorAll('script:not([src])'));
                    
                    // Append non-script content first
                    Array.from(doc.body.children).forEach(child => {
                        if (child.tagName !== 'SCRIPT') {
                            outputElement.appendChild(child.cloneNode(true));
                        }
                    });
                    
                    // Load external scripts sequentially
                    const loadScript = (src) => {
                        return new Promise((resolve, reject) => {
                            const script = document.createElement('script');
                            script.src = src;
                            script.onload = resolve;
                            script.onerror = reject;
                            document.head.appendChild(script);
                        });
                    };
                    
                    // Load all external scripts first
                    Promise.all(externalScripts.map(s => loadScript(s.src)))
                        .then(() => {
                            console.log('External scripts loaded, executing inline scripts');
                            // Now execute inline scripts
                            inlineScripts.forEach(oldScript => {
                                const newScript = document.createElement('script');
                                newScript.textContent = oldScript.textContent;
                                outputElement.appendChild(newScript);
                            });
                            console.log('Output element after processing:', outputElement.children.length, 'children');
                        })
                        .catch(err => {
                            console.error('Failed to load external scripts:', err);
                            outputElement.textContent = 'Error loading Plotly: ' + err.message;
                        });
                } else if (trimmedOutput.startsWith('<!DOCTYPE') || 
                           trimmedOutput.startsWith('<html') ||
                            trimmedOutput.startsWith('<div') ||
                            trimmedOutput.startsWith('<img')) {
                    console.log('Rendering as generic HTML');
                    outputElement.innerHTML = result.output;
                    console.log('Output element after innerHTML:', outputElement.children.length, 'children');
                } else {
                    console.log('Rendering as plain text');
                    outputElement.textContent = result.output;
                }
                outputElement.classList.remove("loading-message");
                if (result.success) {
                    outputElement.classList.add("success-message");
                    outputElement.classList.remove("error-message");
                } else {
                    outputElement.classList.add("error-message");
                    outputElement.classList.remove("success-message");
                }
            }
            
            // Small delay to show progression
            await new Promise(resolve => setTimeout(resolve, 100));
        }
        
        // Setup all editable code blocks (but don't execute them)
        document.querySelectorAll('.code-editor textarea').forEach((textarea) => {
            // Set up CodeMirror editor (editable)
            const editor = CodeMirror.fromTextArea(textarea, {
                mode: "python",
                theme: "pastel-on-dark",
                lineNumbers: true,
                viewportMargin: Infinity
            });
            
            // Find corresponding run button and output element
            const baseId = textarea.id;
            const runButtonId = 'run-' + baseId;
            const outputId = baseId + '-output';
            
            const runButton = document.getElementById(runButtonId);
            const outputElement = document.getElementById(outputId);
            
            if (runButton && outputElement) {
                // Set initial state
                outputElement.textContent = "Ready to run code!";
                outputElement.classList.remove("loading-message");
                
                runButton.addEventListener("click", async () => {
                    const code = editor.getValue().trim();
                    if (!code) {
                        outputElement.textContent = "No code to run";
                        return;
                    }
                    
                    outputElement.textContent = "Running...";
                    outputElement.classList.remove("error-message", "success-message");
                    outputElement.classList.add("loading-message");
                    
                    // Execute the code (this also maintains state for future blocks)
                    const result = await executePythonCode(code);
                    
                    // Display the output - check if it's HTML
                    const trimmedOutput = result.output.trim();
                    console.log('Output length:', trimmedOutput.length);
                    console.log('Output starts with:', trimmedOutput.substring(0, 100));
                    
                    if (trimmedOutput.includes('<script') && trimmedOutput.includes('Plotly')) {
                        // It's Plotly HTML output - extract just the body content
                        console.log('Rendering as Plotly HTML');
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(result.output, 'text/html');
                        // Clear the output element and append the body content
                        outputElement.innerHTML = '';
                        
                        // Find and load external scripts first (like Plotly CDN)
                        const externalScripts = Array.from(doc.querySelectorAll('script[src]'));
                        const inlineScripts = Array.from(doc.querySelectorAll('script:not([src])'));
                        
                        // Append non-script content first
                        Array.from(doc.body.children).forEach(child => {
                            if (child.tagName !== 'SCRIPT') {
                                outputElement.appendChild(child.cloneNode(true));
                            }
                        });
                        
                        // Load external scripts sequentially
                        const loadScript = (src) => {
                            return new Promise((resolve, reject) => {
                                const script = document.createElement('script');
                                script.src = src;
                                script.onload = resolve;
                                script.onerror = reject;
                                document.head.appendChild(script);
                            });
                        };
                        
                        // Load all external scripts first
                        Promise.all(externalScripts.map(s => loadScript(s.src)))
                            .then(() => {
                                console.log('External scripts loaded, executing inline scripts');
                                // Now execute inline scripts
                                inlineScripts.forEach(oldScript => {
                                    const newScript = document.createElement('script');
                                    newScript.textContent = oldScript.textContent;
                                    outputElement.appendChild(newScript);
                                });
                                console.log('Output element after processing:', outputElement.children.length, 'children');
                            })
                            .catch(err => {
                                console.error('Failed to load external scripts:', err);
                                outputElement.textContent = 'Error loading Plotly: ' + err.message;
                            });
                    } else if (trimmedOutput.startsWith('<!DOCTYPE') || 
                               trimmedOutput.startsWith('<html') ||
                               trimmedOutput.startsWith('<div')) {
                        outputElement.innerHTML = result.output;
                    } else {
                        outputElement.textContent = result.output;
                    }
                    outputElement.classList.remove("loading-message");
                    if (result.success) {
                        outputElement.classList.add("success-message");
                        outputElement.classList.remove("error-message");
                    } else {
                        outputElement.classList.add("error-message");
                        outputElement.classList.remove("success-message");
                    }
                });
            }
        });
        
        console.log("All code blocks initialised successfully");

        // Set flag to indicate Pyodide is fully ready
        window.pyodideReady = true;
        console.log("Pyodide fully ready");
        
    } catch (error) {
        console.error("Failed to initialise Pyodide:", error);
        document.querySelectorAll(".output").forEach(el => {
            el.textContent = "Error loading Pyodide: " + error.message;
            el.classList.remove("loading-message");
            el.classList.add("error-message");
        });
    }
}

// Start the application when DOM is loaded
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', main);
} else {
    main();
}
    </script>
</body>
</html>
    